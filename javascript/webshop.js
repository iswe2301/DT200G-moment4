const basketEl=document.getElementById("basket"),smallBasketEl=document.getElementById("small-basket"),checkoutEl=document.getElementById("checkout"),checkoutInlineEl=document.getElementsByClassName("checkout-inline"),checkoutButtonEl=document.getElementsByClassName("checkout-button"),itemsInBasketEl=document.getElementsByClassName("items-in-basket"),totalSumEl=document.getElementsByClassName("total-sum"),notifyEl=document.getElementById("notify");function addToBasket(e,t,l,s,a,n=!1){let o=1;e.classList.add("clicked");let m=JSON.parse(localStorage.getItem("basket"));null==m&&(m=[]);for(let i=0;i<m.length;i++)t==m[i].artId&&(o=m[i].nums+1,m.splice(i,1));m.push({artId:t,artName:l,artCost:s,artImage:a,nums:o});let r=JSON.stringify(m);if(localStorage.setItem("basket",r),!0==n){let c=null;document.getElementById("notify")&&(notifyEl.classList.add("visible"),notifyEl.innerHTML="<p>Varan <b>"+l+"</b> lagd i varukorgen</p>",window.clearTimeout(c),c=window.setTimeout(function(){notifyEl.classList.remove("visible")},3e3))}showBasket(),showSmallBasket(),showCheckout()}function showBasket(){let e=JSON.parse(localStorage.getItem("basket"));if(null==e&&(e=[]),e.length>0&&document.getElementsByClassName("checkout-inline"))for(let t=0;t<checkoutInlineEl.length;t++)checkoutInlineEl[t].style.display="inline";let l=0,s=0;if(e.length>0)for(let a=0;a<e.length;a++){let n=parseInt(e[a].artCost);if(e[a].nums>1){let o=parseInt(e[a].nums);for(let m=0;m<o;m++)l+=n,s++}else l+=n,s++}else if(document.getElementsByClassName("checkout-button"))for(let i=0;i<checkoutButtonEl.length;i++)checkoutButtonEl[i].style.display="none";if(document.getElementsByClassName("items-in-basket"))for(let r=0;r<itemsInBasketEl.length;r++)itemsInBasketEl[r].innerHTML=s;if(document.getElementsByClassName("total-sum"))for(let c=0;c<totalSumEl.length;c++)totalSumEl[c].innerHTML=l+":-";if(document.getElementById("basket")){if(basketEl.innerHTML="",e.length>0){let u=0,k=0;for(let d=0;d<e.length;d++){let h=parseInt(e[d].artCost);if(e[d].nums>1){let E=parseInt(e[d].nums);for(let f=0;f<E;f++)u+=h,k++}else u+=h,k++;let g=document.createElement("li"),B=document.createElement("span");B.className="item-text";let p=document.createTextNode(e[d].artName+", ");B.appendChild(p),g.appendChild(B);let y=document.createElement("span");y.className="item-count";let $=document.createTextNode(e[d].nums+" st ");y.appendChild($),g.appendChild(y);let I=document.createElement("span");I.className="item-cost";let C=document.createTextNode(h+":-");I.appendChild(C),g.appendChild(I),basketEl.appendChild(g)}let b=document.createElement("li");b.className="sum";let N=document.createTextNode("Summa: "+u+":-");if(b.appendChild(N),basketEl.appendChild(b),document.getElementsByClassName("checkout-button"))for(let T=0;T<checkoutButtonEl.length;T++)checkoutButtonEl[T].style.display="block"}else if(basket.innerHTML="<li>Varukorgen \xe4r tom</li>",document.getElementsByClassName("checkout-button"))for(let L=0;L<checkoutButtonEl.length;L++)checkoutButtonEl[L].style.display="none"}}function showSmallBasket(){if(document.getElementById("small-basket")){var e=JSON.parse(localStorage.getItem("basket"));if(null==e&&(e=[]),e.length>0){let t=0,l=0;for(let s=0;s<e.length;s++){let a=parseInt(e[s].artCost);if(e[s].nums>1){let n=parseInt(e[s].nums);for(let o=0;o<n;o++)t+=a,l++}else t+=a,l++}if(smallBasketEl.innerHTML=l+"st, "+t+":-",document.getElementsByClassName("items-in-basket"))for(let m=0;m<itemsInBasketEl.length;m++)itemsInBasketEl[m].innerHTML=l}else smallBasketEl.innerHTML=""}}function showCheckout(){if(document.getElementById("checkout")){let e=JSON.parse(localStorage.getItem("basket"));if(null==e&&(e=[]),checkoutEl.innerHTML="",e.length>0){let t=0;for(let l=0;l<e.length;l++){let s=parseInt(e[l].artCost),a=0;if(e[l].nums>1){let n=parseInt(e[l].nums);for(let o=0;o<n;o++)t+=s,a+=s}else t+=s,a=s;var m=e[l].artId,i=e[l].artName,r=e[l].nums,c=e[l].artImage;checkoutEl.innerHTML+="<tr><td><img src='"+c+"' alt='Produktbild f\xf6r "+i+"' /><td class='artID'>"+m+"</td><td>"+i+"</td><td>"+r+" st.</td><td>"+a+":-</td></tr>"}checkoutEl.innerHTML+="<tr><td colspan='5' class='checkout-sum'>Summa: "+t+":-</td>"}else checkoutEl.innerHTML="<tr><td colspan='5'>Varukorgen \xe4r tom</td></tr>"}}function checkoutBasket(){if(document.getElementById("checkout-form").reportValidity()){let e=JSON.parse(localStorage.getItem("basket"));if(null!=e){let t=0,l=0;for(let s=0;s<e.length;s++){let a=parseInt(e[s].nums);for(let n=0;n<a;n++)l+=parseInt(e[s].artCost),t++}1==t?alert("Din order \xe4r mottagen! En vara - totalsumma: "+l+":-"):alert("Din order \xe4r mottagen! "+t+" stycken varor - totalsumma: "+l+":-"),emptyBasket(!1)}else alert("Inga varor i din varukorg!")}}function emptyBasket(e=!0){!0==e?!!confirm("\xc4r du s\xe4ker att du vill radera alla varor?")&&(localStorage.removeItem("basket"),showBasket(),showSmallBasket(),showCheckout()):(localStorage.removeItem("basket"),showBasket(),showSmallBasket(),showCheckout())}window.addEventListener("load",showBasket,!1),window.addEventListener("load",showSmallBasket,!1),window.addEventListener("load",showCheckout,!1);